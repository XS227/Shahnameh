<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shahnameh Game | REAL Token Live Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700&family=Vazirmatn:wght@400;500;700&display=swap"
        rel="stylesheet"
    />
    {% include 'partials/global_style.html' %}
    <style>
        :root {
            --bg: #050816;
            --bg-soft: rgba(13, 20, 45, 0.88);
            --surface: rgba(16, 23, 56, 0.78);
            --surface-strong: rgba(10, 18, 48, 0.92);
            --text: #f8fafc;
            --text-muted: rgba(203, 213, 225, 0.86);
            --muted: rgba(226, 232, 240, 0.82);
            --outline: rgba(148, 163, 184, 0.22);
            --accent-primary: #38bdf8;
            --accent-secondary: #c084fc;
            --highlight: #facc15;
            --secondary: rgba(56, 189, 248, 0.85);
            --card-border: rgba(94, 234, 212, 0.16);
        }

        [data-theme="light"] {
            --bg: #f4f6fb;
            --bg-soft: rgba(255, 255, 255, 0.92);
            --surface: rgba(255, 255, 255, 0.85);
            --surface-strong: rgba(255, 255, 255, 0.97);
            --text: #0f172a;
            --text-muted: rgba(71, 85, 105, 0.8);
            --muted: rgba(71, 85, 105, 0.75);
            --outline: rgba(15, 23, 42, 0.12);
            --card-border: rgba(15, 23, 42, 0.12);
        }

        body {
            margin: 0;
            font-family: 'Outfit', 'Segoe UI', system-ui, sans-serif;
            background:
                radial-gradient(circle at 12% 10%, rgba(56, 189, 248, 0.2), transparent 55%),
                radial-gradient(circle at 88% 8%, rgba(192, 132, 252, 0.22), transparent 62%),
                linear-gradient(160deg, #050816 0%, #060b1d 40%, #0b1230 100%);
            color: var(--text);
            min-height: 100vh;
            scroll-behavior: smooth;
        }

        main.landing {
            position: relative;
            overflow: hidden;
        }

        section {
            padding: clamp(3rem, 5vw, 4.6rem) clamp(1.5rem, 6vw, 3.5rem);
        }

        .hero {
            padding-top: clamp(4rem, 7vw, 5.5rem);
        }

        .hero-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: clamp(2.5rem, 5vw, 4rem);
            align-items: center;
        }

        .hero-copy h1 {
            font-family: 'Baloo 2', cursive;
            font-size: clamp(2.8rem, 6vw, 4.2rem);
            margin: 0 0 1.25rem;
            background: linear-gradient(120deg, var(--highlight), rgba(56, 189, 248, 0.95));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 22px 45px rgba(6, 9, 24, 0.75);
        }

        .hero-copy p {
            font-size: clamp(1.05rem, 2.2vw, 1.25rem);
            color: var(--text-muted);
            margin: 0 0 2rem;
            line-height: 1.7;
        }

        .cta-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .button {
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.95rem 1.8rem;
            border-radius: 999px;
            background: linear-gradient(135deg, var(--accent-secondary), var(--accent-primary));
            color: #020617;
            font-weight: 600;
            text-decoration: none;
            box-shadow: 0 20px 48px -24px rgba(56, 189, 248, 0.9);
            transition: transform 0.18s ease, box-shadow 0.25s ease;
            border: 1px solid rgba(148, 163, 184, 0.22);
        }

        .button.secondary {
            background: rgba(5, 12, 28, 0.6);
            color: var(--text);
            border: 1px solid var(--card-border);
            box-shadow: none;
        }

        .language-switcher {
            position: absolute;
            top: clamp(1rem, 4vw, 2.5rem);
            right: clamp(1rem, 4vw, 3rem);
            display: inline-flex;
            gap: 0.5rem;
            background: rgba(9, 14, 33, 0.65);
            border: 1px solid var(--card-border);
            border-radius: 999px;
            padding: 0.35rem;
            backdrop-filter: blur(12px);
            z-index: 3;
            box-shadow: 0 18px 32px -24px rgba(15, 23, 42, 0.85);
        }

        .language-button {
            border: none;
            background: transparent;
            color: var(--text-muted);
            font-weight: 600;
            padding: 0.45rem 0.95rem;
            border-radius: 999px;
            cursor: pointer;
            transition: background-color 150ms ease, color 150ms ease, transform 150ms ease;
        }

        .language-button:hover,
        .language-button:focus-visible {
            color: var(--text);
            transform: translateY(-1px);
        }

        .language-button.active {
            background: linear-gradient(135deg, rgba(56, 189, 248, 0.9), rgba(192, 132, 252, 0.9));
            color: #020617;
        }

        .button:hover,
        .button:focus-visible {
            transform: translateY(-3px);
            box-shadow: 0 24px 52px -24px rgba(56, 189, 248, 0.95);
        }

        .button.secondary:hover,
        .button.secondary:focus-visible {
            border-color: rgba(56, 189, 248, 0.65);
            color: rgba(56, 189, 248, 0.95);
        }

        .hero-art {
            position: relative;
            min-height: 340px;
            border-radius: 32px;
            background: linear-gradient(145deg, rgba(56, 189, 248, 0.32), rgba(192, 132, 252, 0.28));
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 25px 60px -30px rgba(7, 10, 25, 0.85);
        }

        .hero-art::before {
            content: "";
            position: absolute;
            inset: 0;
            background: url('https://images.unsplash.com/photo-1545239351-1141bd82e8a6?auto=format&fit=crop&w=1200&q=80') center / cover;
            opacity: 0.35;
            mix-blend-mode: screen;
        }

        .hero-art::after {
            content: "";
            position: absolute;
            inset: 15% 12%;
            border-radius: 26px;
            border: 1px solid var(--card-border);
            background: rgba(12, 19, 40, 0.75);
            box-shadow: inset 0 0 0 1px rgba(56, 189, 248, 0.15);
        }

        .hero-art-content {
            position: relative;
            padding: 2rem 2.4rem;
            text-align: center;
            z-index: 1;
        }

        .hero-art-content h2 {
            font-family: 'Baloo 2', cursive;
            margin: 0 0 0.75rem;
            font-size: 1.5rem;
            background: linear-gradient(135deg, var(--highlight), rgba(56, 189, 248, 0.95));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-art-content p {
            margin: 0;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .section-inner {
            max-width: 1180px;
            margin: 0 auto;
        }

        .transparency-section {
            position: relative;
            background: linear-gradient(180deg, rgba(7, 11, 28, 0.92), rgba(5, 8, 22, 0.98));
            border-block: 1px solid var(--card-border);
        }

        .transparency-header {
            text-align: center;
            max-width: 72ch;
            margin: 0 auto 2.6rem;
        }

        .transparency-header p {
            margin: 0;
            color: var(--text-muted);
            font-size: 1rem;
        }

        .transparency-grid {
            display: grid;
            gap: 1.8rem;
            margin-bottom: clamp(2rem, 5vw, 3rem);
        }

        @media (min-width: 720px) {
            .transparency-grid {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }

        .transparency-card {
            position: relative;
            padding: clamp(1.8rem, 4vw, 2.4rem);
            border-radius: 28px;
            background: linear-gradient(155deg, rgba(10, 16, 40, 0.9), rgba(18, 28, 60, 0.7));
            border: 1px solid var(--card-border);
            box-shadow: 0 22px 55px -28px rgba(7, 10, 28, 0.85);
            backdrop-filter: blur(18px);
        }

        .transparency-card h3 {
            margin: 0 0 0.75rem;
            font-family: 'Baloo 2', cursive;
            font-size: 1.3rem;
            color: var(--highlight);
        }

        .transparency-value {
            font-size: clamp(1.8rem, 4.5vw, 2.6rem);
            font-weight: 600;
            color: var(--secondary);
            margin: 0 0 0.85rem;
        }

        .transparency-note {
            margin: 0;
            color: var(--text-muted);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .mission-copy {
            margin: 0 auto clamp(2rem, 5vw, 3rem);
            max-width: 80ch;
            font-size: 1.05rem;
            color: var(--muted);
            text-align: center;
            line-height: 1.8;
        }

        .mission-copy strong {
            color: var(--highlight);
        }

        .reeal-section {
            position: relative;
            padding: clamp(3rem, 6vw, 5rem) 0;
        }

        .reeal-header {
            max-width: 72ch;
            margin: 0 auto clamp(2rem, 5vw, 3rem);
            text-align: center;
        }

        .reeal-header p {
            margin: 0;
            color: var(--text-muted);
            font-size: 1rem;
        }

        .reeal-grid {
            display: grid;
            gap: clamp(1.5rem, 4vw, 2.5rem);
        }

        @media (min-width: 960px) {
            .reeal-grid {
                grid-template-columns: 1.1fr 0.9fr;
                align-items: stretch;
            }
        }

        .reeal-card {
            background: linear-gradient(155deg, rgba(10, 16, 38, 0.85), rgba(18, 28, 60, 0.65));
            border: 1px solid var(--card-border);
            border-radius: 28px;
            padding: clamp(1.8rem, 4vw, 2.6rem);
            box-shadow: 0 22px 50px -28px rgba(7, 10, 28, 0.9);
            backdrop-filter: blur(16px);
        }

        .reeal-card h3 {
            margin: 0 0 1.2rem;
            font-family: 'Baloo 2', cursive;
            font-size: 1.4rem;
            color: var(--highlight);
        }

        .price-table {
            width: 100%;
            border-collapse: collapse;
            color: var(--text);
        }

        .price-table thead th {
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.08em;
            color: rgba(248, 250, 252, 0.6);
            padding-bottom: 0.75rem;
        }

        .price-table tbody tr {
            border-block: 1px solid rgba(148, 163, 184, 0.12);
        }

        .price-table tbody tr:first-child {
            border-top: none;
        }

        .price-table tbody tr:last-child {
            border-bottom: none;
        }

        .price-table td {
            padding: 0.85rem 0;
            font-size: 0.95rem;
            color: var(--text-muted);
        }

        .price-table td strong {
            color: var(--text);
        }

        .price-table td span {
            display: block;
            font-size: 0.8rem;
            color: rgba(248, 250, 252, 0.6);
        }

        .chart-card {
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
        }

        .chart-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .chart-toolbar strong {
            font-size: 1rem;
            color: var(--text);
        }

        .chart-toolbar span {
            color: rgba(248, 250, 252, 0.6);
            font-size: 0.85rem;
        }

        .chart-tabs {
            display: inline-flex;
            background: rgba(8, 11, 27, 0.65);
            border-radius: 999px;
            border: 1px solid var(--card-border);
            overflow: hidden;
        }

        .chart-tab {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            font-weight: 600;
            color: rgba(248, 250, 252, 0.6);
        }

        .chart-tab.active {
            color: #020617;
            background: linear-gradient(135deg, rgba(56, 189, 248, 0.9), rgba(192, 132, 252, 0.9));
        }

        .chart-note {
            font-size: 0.85rem;
            color: rgba(248, 250, 252, 0.6);
            line-height: 1.6;
        }

        .community-section {
            padding: clamp(3rem, 6vw, 5rem) 0;
            background: linear-gradient(180deg, rgba(7, 11, 30, 0.9), rgba(5, 8, 22, 0.96));
            border-block: 1px solid var(--card-border);
        }

        .community-section .section-inner {
            text-align: center;
        }

        .community-intro {
            max-width: 70ch;
            margin: 0 auto clamp(2rem, 5vw, 3rem);
            color: var(--text-muted);
            font-size: 1rem;
        }

        .social-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
        }

        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            padding: 1rem 1.2rem;
            border-radius: 18px;
            background: rgba(8, 11, 27, 0.72);
            border: 1px solid var(--card-border);
            color: var(--text);
            text-decoration: none;
            font-weight: 600;
            transition: transform 150ms ease, box-shadow 200ms ease, border-color 150ms ease;
        }

        .social-link:hover,
        .social-link:focus-visible {
            transform: translateY(-3px);
            border-color: rgba(56, 189, 248, 0.85);
            box-shadow: 0 18px 40px -20px rgba(56, 189, 248, 0.7);
        }

        .social-icon {
            display: inline-flex;
            width: 1.6rem;
            height: 1.6rem;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(56, 189, 248, 0.18);
            color: var(--secondary);
            font-size: 0.95rem;
        }

        .countdown-panel {
            border-radius: 28px;
            padding: clamp(2rem, 5vw, 2.8rem);
            background: linear-gradient(160deg, rgba(6, 10, 28, 0.9), rgba(13, 19, 42, 0.7));
            border: 1px solid var(--card-border);
            box-shadow: 0 20px 48px -26px rgba(6, 9, 24, 0.85);
            text-align: center;
        }

        .countdown-panel h3 {
            margin: 0 0 1.5rem;
            font-family: 'Baloo 2', cursive;
            font-size: clamp(1.6rem, 4vw, 2.1rem);
            color: var(--highlight);
        }

        .countdown-grid {
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: clamp(1rem, 3vw, 1.5rem);
        }

        @media (max-width: 640px) {
            .countdown-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        .countdown-cell {
            padding: 1.2rem 1rem;
            border-radius: 24px;
            background: rgba(15, 18, 42, 0.82);
            border: 1px solid var(--card-border);
            display: grid;
            gap: 0.35rem;
        }

        .countdown-value {
            font-size: clamp(1.8rem, 4vw, 2.4rem);
            font-weight: 700;
            color: var(--secondary);
        }

        .countdown-label {
            font-size: 0.85rem;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: rgba(248, 250, 252, 0.6);
        }

        section {
            padding: clamp(3rem, 5vw, 4.5rem) clamp(1.5rem, 5vw, 3.5rem);
            position: relative;
        }

        .section-inner {
            max-width: 1100px;
            margin: 0 auto;
        }

        .section-title {
            font-family: 'Baloo 2', cursive;
            text-align: center;
            font-size: clamp(2rem, 4.5vw, 2.8rem);
            margin: 0 0 1rem;
            background: linear-gradient(130deg, var(--highlight), rgba(56, 189, 248, 0.95));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 20px 38px rgba(8, 10, 28, 0.55);
        }

        [data-theme="light"] .section-title {
            background: none;
            color: #0f172a;
            -webkit-text-fill-color: #0f172a;
            text-shadow: none;
        }

        .section-lead {
            text-align: center;
            color: var(--text-muted);
            margin: 0 auto 2.8rem;
            max-width: 720px;
            line-height: 1.8;
        }

        .token-grid {
            display: grid;
            gap: 1.6rem;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        }

        .metric-card {
            padding: 1.6rem;
            border-radius: 22px;
            background: linear-gradient(155deg, rgba(15, 23, 42, 0.88), rgba(30, 41, 59, 0.65));
            border: 1px solid var(--card-border);
            box-shadow: 0 22px 55px -28px rgba(8, 9, 24, 0.8);
            backdrop-filter: blur(18px);
        }

        [data-theme="light"] .metric-card {
            box-shadow: 0 18px 40px -26px rgba(15, 23, 42, 0.25);
        }

        .metric-card h3 {
            margin: 0 0 0.45rem;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--secondary);
        }

        .metric-card strong {
            font-size: 1.5rem;
            display: block;
        }

        .metric-card span {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .token-error {
            margin-top: 2rem;
            padding: 1.4rem;
            border-radius: 18px;
            background: rgba(248, 113, 113, 0.12);
            border: 1px solid rgba(248, 113, 113, 0.35);
            color: #fecaca;
        }

        [data-theme="light"] .token-error {
            background: rgba(248, 113, 113, 0.15);
            color: #b91c1c;
            border-color: rgba(248, 113, 113, 0.35);
        }

        .social-grid {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        }

        .social-pill {
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.85rem 1.2rem;
            border-radius: 18px;
            background: rgba(15, 19, 40, 0.65);
            border: 1px solid var(--outline);
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: transform 0.18s ease, box-shadow 0.25s ease;
        }

        [data-theme="light"] .social-pill {
            background: rgba(255, 255, 255, 0.9);
        }

        .social-pill:hover,
        .social-pill:focus-visible {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px -26px rgba(56, 189, 248, 0.75);
        }

        .social-pill svg {
            width: 1.2rem;
            height: 1.2rem;
        }

        .feature-grid {
            display: grid;
            gap: 1.6rem;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        }

        body[dir='rtl'] {
            font-family: 'Vazirmatn', 'Baloo 2', 'Segoe UI', system-ui, sans-serif;
        }

        body[dir='rtl'] .hero {
            direction: rtl;
        }

        body[dir='rtl'] .hero-copy,
        body[dir='rtl'] .hero-card,
        body[dir='rtl'] .transparency-header,
        body[dir='rtl'] .mission-copy,
        body[dir='rtl'] .countdown-panel,
        body[dir='rtl'] .section-title,
        body[dir='rtl'] .feature-card,
        body[dir='rtl'] .intel-header,
        body[dir='rtl'] .reeal-header,
        body[dir='rtl'] .chart-toolbar,
        body[dir='rtl'] .community-section .section-inner,
        body[dir='rtl'] footer {
            text-align: right;
        }

        body[dir='rtl'] .language-switcher {
            right: auto;
            left: clamp(1rem, 4vw, 3rem);
        }

        body[dir='rtl'] .cta-row {
            justify-content: flex-end;
        }

        body[dir='rtl'] .feature-card ul {
            padding-left: 0;
            padding-right: 1.1rem;
        }

        body[dir='rtl'] .timeline-step {
            padding: 1.6rem 3.2rem 1.6rem 1.6rem;
        }

        body[dir='rtl'] .timeline-step::before {
            left: auto;
            right: 1.1rem;
        }

        body[dir='rtl'] .social-link {
            flex-direction: row-reverse;
        }

        .intel-section {
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 20% 20%, rgba(56, 189, 248, 0.25), transparent 65%),
                radial-gradient(circle at 80% 80%, rgba(249, 115, 22, 0.2), transparent 70%);
            opacity: 0.6;
            pointer-events: none;
        }

        .intel-section::before {
            width: 260px;
            height: 260px;
            top: -120px;
            right: -80px;
            background: radial-gradient(circle, rgba(56, 189, 248, 0.65), transparent 65%);
        }

        .intel-section::after {
            width: 220px;
            height: 220px;
            bottom: -110px;
            left: -60px;
            background: radial-gradient(circle, rgba(250, 204, 21, 0.6), transparent 60%);
        }

        }

        .intel-section::after {
            width: 220px;
            height: 220px;
            bottom: -110px;
            left: -60px;
            background: radial-gradient(circle, rgba(250, 204, 21, 0.6), transparent 60%);
        }

        .intel-header {
            position: relative;
        }

        .feature-card h3 {
            margin: 0 0 0.65rem;
            font-size: 1.3rem;
            color: rgba(56, 189, 248, 0.95);
        }

        .feature-card p {
            color: var(--muted);
            line-height: 1.7;
        }

        .timeline {
            display: grid;
            gap: 1.5rem;
            margin-top: 2.5rem;
        }

        .timeline-step {
            position: relative;
            padding: 1.6rem 1.8rem 1.6rem 3.2rem;
            border-radius: 22px;
            background: var(--surface);
            border: 1px solid var(--outline);
        }

        .timeline-step::before {
            content: attr(data-step);
            position: absolute;
            top: 1.4rem;
            left: 1.2rem;
            width: 2rem;
            height: 2rem;
            border-radius: 999px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: #020617;
            display: grid;
            place-items: center;
            font-weight: 700;
            font-family: 'Baloo 2', cursive;
        }


        .intel-badge.gain {
            background: rgba(34, 197, 94, 0.2);
            color: #86efac;
            border-color: rgba(34, 197, 94, 0.4);
        }

        .intel-badge.loss {
            background: rgba(248, 113, 113, 0.2);
            color: #fca5a5;
            border-color: rgba(248, 113, 113, 0.4);
        }

        .timeline-step p {
            margin: 0 0 1rem;
            color: var(--muted);
            line-height: 1.7;
        }

        .timeline-step ul {
            margin: 0;
            padding-left: 1rem;
            color: var(--text);
        }

        .timeline-step li {
            margin-bottom: 0.4rem;
        }

        [data-theme="light"] .timeline-step {
            background: rgba(255, 255, 255, 0.92);
            box-shadow: 0 20px 40px -26px rgba(15, 23, 42, 0.3);
        }
    </style>
</head>
<body>
    <main class="landing">
        <div class="language-switcher" role="group" aria-label="Language toggle">
            <button class="language-button active" type="button" data-lang="en">EN</button>
            <button class="language-button" type="button" data-lang="fa">فا</button>
        </div>
        <section class="hero">
            <div class="hero-inner">
                <div class="hero-copy">
                    <h1 data-i18n="hero.title">Forge Legends on the Shahnameh Frontier</h1>
                    <p data-i18n="hero.lead" data-i18n-format="html">
                        Rally your guild, grow the kingdom and chart a path through the myths of ancient Persia. Honoured as
                        the <strong>third Editors' Choice</strong> during our first phase, Shahnameh Game blends playful strategy
                        with Web3 stewardship so every decision leaves a mark on the eternal chronicle.
                    </p>
                    <p data-i18n="hero.mission" data-i18n-format="html">
                        <strong>We are set on revolutionising the national economy of Iran through the gaming industry</strong>,
                        creating equitable rails where player creativity, culture and capital compound for communities at
                        home and across the diaspora.
                    </p>
                    <div class="cta-row">
                        <a class="button" href="/api/">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 6.75h.008v.008H11.25V6.75zM11.25 9h.008v.008H11.25V9zm0 2.25h.008v.008H11.25V11.25zm0 2.25h.008v.008H11.25V13.5zm0 2.25h.008v.008H11.25V15.75zm0 2.25h.008v.008H11.25V18zm2.25-11.25h.008v.008H13.5V6.75zm0 2.25h.008v.008H13.5V9zm0 2.25h.008v.008H13.5V11.25zm0 2.25h.008v.008H13.5V13.5zm0 2.25h.008v.008H13.5V15.75zm0 2.25h.008v.008H13.5V18zm2.25-11.25h.008v.008H15.75V6.75zm0 2.25h.008v.008H15.75V9zm0 2.25h.008v.008H15.75V11.25zm0 2.25h.008v.008H15.75V13.5zm0 2.25h.008v.008H15.75V15.75zm0 2.25h.008v.008H15.75V18z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 7.5l.72-.72a1.5 1.5 0 011.06-.44h7.5A1.5 1.5 0 0117.5 7.5v9a1.5 1.5 0 01-1.5 1.5h-7.5a1.5 1.5 0 01-1.5-1.5V7.5z" />
                            </svg>
                            <span data-i18n="hero.cta.primary" data-i18n-format="text">Explore the API</span>
                        </a>
                        <a class="button secondary" href="{% url 'whitepaper' %}">
                            <span data-i18n="hero.cta.secondary" data-i18n-format="text">Read the Whitepaper</span>
                        </a>
                    </div>
            </div>
            <div class="hero-visual">
                <div class="hero-card">
                    <h2 data-i18n="hero.card.title">Story Season 2: Dawn of the Simurgh</h2>
                    <p data-i18n="hero.card.body">
                        Chart expeditions, tame mythical familiars and unlock cooperative quests to rebuild the House of Knowledge.
                        Every completed saga reshapes the shared roadmap.
                    </p>
                    <div class="cta-row">
                        <a class="button" href="{% url 'whitepaper' %}" data-i18n="hero.card.ctaVision" data-i18n-format="text">Read the vision</a>
                        <a class="button secondary" href="{% url 'season2-roadmap' %}" data-i18n="hero.card.ctaRoadmap" data-i18n-format="text">Season 2 roadmap</a>
                    </div>
                </div>
                <div class="hero-art">
                    <div class="hero-art-content">
                        <h2 data-i18n="hero.pulse.title">REAL community pulse</h2>
                        <p data-i18n="hero.pulse.copy" data-i18n-format="text">
                            Live data, lore events, and social rallies keep Shahnameh explorers aligned across time zones.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        </section>

        <section id="real-token">
            <div class="section-inner">
                <h2 class="section-title" data-i18n="metrics.title">REAL token live metrics</h2>
                <p class="section-lead" data-i18n="metrics.lead">
                    Streaming directly from DYOR so treasury leads always see the same numbers.
                </p>
                {% if token_error %}
                <div class="token-error">
                    <span data-i18n="metrics.error" data-i18n-format="text">Live metrics temporarily unavailable. We'll retry shortly.</span>
                    <div><small>{{ token_error }}</small></div>
                </div>
                {% endif %}
                {% if token_stats %}
                <div class="token-grid">
                    <div class="metric-card">
                        <h3 data-i18n="metrics.priceUsd.title" data-i18n-format="text">Price (USD)</h3>
                        <strong>{{ token_stats.price_usd|default:"—" }}</strong>
                        <span data-i18n="metrics.priceUsd.note">Current DYOR spot price</span>
                    </div>
                    {% if token_stats.price_ton %}
                    <div class="metric-card">
                        <h3 data-i18n="metrics.priceTon.title" data-i18n-format="text">Price (TON)</h3>
                        <strong>{{ token_stats.price_ton }}</strong>
                        <span data-i18n="metrics.priceTon.note">Quoted in native TON</span>
                    </div>
                    {% endif %}
                    <div class="metric-card">
                        <h3 data-i18n="metrics.change.title" data-i18n-format="text">24h change</h3>
                        <strong>{{ token_stats.price_change_24h|default:"—" }}</strong>
                        <span data-i18n="metrics.change.note">Price momentum</span>
                    </div>
                    <div class="metric-card">
                        <h3 data-i18n="metrics.marketCap.title" data-i18n-format="text">Market cap</h3>
                        <strong>{{ token_stats.market_cap|default:"—" }}</strong>
                        <span data-i18n="metrics.marketCap.note">Fully diluted valuation</span>
                    </div>
                    <div class="metric-card">
                        <h3 data-i18n="metrics.volume.title" data-i18n-format="text">24h volume</h3>
                        <strong>{{ token_stats.volume_24h|default:"—" }}</strong>
                        <span data-i18n="metrics.volume.note">Liquidity flowing through REAL</span>
                    </div>
                    <div class="metric-card">
                        <h3 data-i18n="metrics.liquidityLocked.title" data-i18n-format="text">Liquidity locked</h3>
                        <strong>{{ token_stats.liquidity_locked|default:"—" }}</strong>
                        <span data-i18n="metrics.liquidityLocked.note">Reserves tracked by DYOR</span>
                    </div>
                </div>
                {% endif %}
                {% if token_stats.last_updated %}
                <p class="section-lead" style="margin-top: 2.2rem; font-size: 0.95rem;">
                    <span data-i18n="metrics.lastSynced" data-i18n-format="text">Last synced</span>: {{ token_stats.last_updated }}
                </p>
                {% endif %}
            </div>
            <p class="intel-footer" id="intel-footer">
                Data updates every few minutes straight from
                <a href="https://tonapi.io/" target="_blank" rel="noreferrer">TonAPI</a>
                and
                <a href="https://www.dyor.com/" target="_blank" rel="noreferrer">DYOR Intelligence</a>.
            </p>
        </div>
    </section>

    <section class="transparency-section">
        <div class="section-inner">
            <div class="transparency-header">
                <h2 class="section-title" data-i18n="transparency.title">Token Transparency, Front and Centre</h2>
                <p data-i18n="transparency.lead">
                    Every explorer can audit the heart of the Shahnameh treasury in real time. Track live price action,
                    unique holder momentum and the liquidity securing our adventures without leaving the landing page.
                </p>
            </div>
            <div class="transparency-grid">
                <article class="transparency-card">
                    <h3 data-i18n="transparency.cards.price">Current TON Price</h3>
                    <p class="transparency-value" data-ton-price>$--</p>
                    <p class="transparency-note">
                        <span data-i18n="transparency.cards.change">24h Change:</span>
                        <span class="intel-badge" data-ton-change>--%</span>
                    </p>
                </article>
                <article class="transparency-card">
                    <h3 data-i18n="transparency.cards.holders">Holder Accounts</h3>
                    <p class="transparency-value" data-ton-holders>--</p>
                    <p
                        class="transparency-note"
                        data-ton-holders-note
                        data-i18n="transparency.cards.holdersNote"
                        data-i18n-dynamic="true"
                    >
                        Awaiting holder telemetry…
                    </p>
                </article>
                <article class="transparency-card">
                    <h3 data-i18n="transparency.cards.liquidity">Liquidity Depth</h3>
                    <p class="transparency-value" data-ton-liquidity data-format="raw">$--</p>
                    <p class="transparency-note" data-i18n="transparency.cards.liquidityNote">Aggregated across major TON pools and refreshed continuously.</p>
                </article>
            </div>
            <p class="mission-copy" data-i18n="mission.statement" data-i18n-format="html">
                Our mission is bold: empower Iranian creators and players with regenerative, decentralised economics that
                funnel new prosperity into local studios, guilds and storytellers. <strong>Transparent tokenomics is the
                bedrock of that revolution.</strong>
            </p>
            <div class="countdown-panel" aria-live="polite">
                <h3 data-i18n="countdown.title">Countdown to the Next Shahnameh Season</h3>
                <div class="countdown-grid">
                    <div class="countdown-cell">
                        <span class="countdown-value" data-countdown-days>--</span>
                        <span class="countdown-label" data-i18n="countdown.days">Days</span>
                    </div>
                    <div class="countdown-cell">
                        <span class="countdown-value" data-countdown-hours>--</span>
                        <span class="countdown-label" data-i18n="countdown.hours">Hours</span>
                    </div>
                    <div class="countdown-cell">
                        <span class="countdown-value" data-countdown-minutes>--</span>
                        <span class="countdown-label" data-i18n="countdown.minutes">Minutes</span>
                    </div>
                    <div class="countdown-cell">
                        <span class="countdown-value" data-countdown-seconds>--</span>
                        <span class="countdown-label" data-i18n="countdown.seconds">Seconds</span>
                    </div>
                </div>
                <p class="transparency-note" style="margin-top: 1.5rem;" data-countdown-message>
                    Season relaunch is scheduled for <strong>11 November 2025</strong> — synchronise your guild's plans now.
                </p>
            </div>
        </div>
    </section>

    <section>
        <div class="section-inner">
            <h2 class="section-title" data-i18n="chronicle.title">Why the Chronicle Matters</h2>
            <div class="feature-grid">
                <article class="feature-card">
                    <h3 data-i18n="chronicle.cards.lore">Living Lore</h3>
                    <p data-i18n="chronicle.cards.loreBody">
                        Weekly chapters ripple across the realm, introducing fresh objectives and collaborative twists
                        inspired by Ferdowsi's timeless poetry.
                    </p>
                </article>
                <article class="feature-card">
                    <h3 data-i18n="chronicle.cards.economy">Player-Governed Economy</h3>
                    <p data-i18n="chronicle.cards.economyBody">
                        Guild councils steward resources, vote on upgrades and set tribute paths that weave on-chain governance
                        with narrative stakes.
                    </p>
                </article>
                <article class="feature-card">
                    <h3 data-i18n="chronicle.cards.adventure">Adventures for Every Hero</h3>
                    <p data-i18n="chronicle.cards.adventureBody">
                        From puzzle raids to social quests, the Shahnameh frontier rewards storytellers, strategists and
                        lorekeepers alike.
                    </p>
                </article>
            </div>
        </div>
    </section>

    <section class="intel-section">
        <div class="section-inner">
            <div class="intel-header">
                <h2 data-i18n="intel.title">Live TON Intelligence</h2>
                <p data-i18n="intel.lead">
                    Stay nimble with on-chain telemetry. We surface token price swings, liquidity health and due diligence
                    sentiment directly from TonAPI and DYOR so guild treasurers can react in real time.
                </p>
            </div>
            <div class="intel-grid" id="intel-grid">
                <article class="intel-card" id="ton-price-card">
                    <h3 data-i18n="intel.cards.price">TON Price</h3>
                    <div class="intel-value" data-ton-price>$--</div>
                    <div class="intel-metric">
                        <span data-i18n="intel.cards.change">24h Change:</span>
                        <span class="intel-badge" data-ton-change>--%</span>
                    </div>
                    <p
                        class="intel-metric"
                        data-ton-liquidity
                        data-i18n="intel.cards.liquidityNote"
                        data-i18n-dynamic="true"
                    >
                        Liquidity data loading…
                    </p>
                </article>
                <article class="intel-card" id="dyor-health-card">
                    <h3 data-i18n="intel.cards.dyor">DYOR Project Pulse</h3>
                    <div class="intel-value" data-dyor-score>--%</div>
                    <div
                        class="intel-metric"
                        data-dyor-tier
                        data-i18n="intel.cards.dyorTier"
                        data-i18n-dynamic="true"
                    >
                        Awaiting DYOR audit tiers…
                    </div>
                    <p
                        class="intel-metric"
                        data-dyor-updated
                        data-i18n="intel.cards.dyorUpdated"
                        data-i18n-dynamic="true"
                    >
                        Refreshing insights…
                    </p>
                </article>
                <article class="intel-card" id="content-share-card">
                    <h3 data-i18n="intel.cards.content">Content Contribution</h3>
                    <div class="intel-value" data-content-share>--%</div>
                    <div class="intel-metric">
                        <span data-i18n="intel.cards.contributors">Verified Contributors:</span>
                        <span class="intel-badge" data-contributors>--</span>
                    </div>
                    <p
                        class="intel-metric"
                        data-content-note
                        data-i18n="intel.cards.contentNote"
                        data-i18n-dynamic="true"
                    >
                        Syncing community dashboards…
                    </p>
                </article>
            </div>
            <p class="intel-footer" id="intel-footer" data-i18n="intel.footer" data-i18n-format="html">
                Data updates every few minutes straight from
                <a href="https://tonapi.io/" target="_blank" rel="noreferrer">TonAPI</a>
                and
                <a href="https://www.dyor.com/" target="_blank" rel="noreferrer">DYOR Intelligence</a>.
            </p>
        </div>
    </section>

    <section class="reeal-section">
        <div class="section-inner">
            <div class="reeal-header">
                <h2 class="section-title" data-i18n="reeal.title">REEAL Token Market Pulse</h2>
                <p data-i18n="reeal.lead">
                    Track how the REEAL treasury token performs across global markets and visualise seven-day price action in one glance.
                </p>
            </div>
            <div class="reeal-grid">
                <article class="reeal-card">
                    <h3 data-i18n="reeal.table.title">Global Price Board</h3>
                    <table class="price-table">
                        <thead>
                            <tr>
                                <th data-i18n="reeal.table.pair">Pair</th>
                                <th data-i18n="reeal.table.market">Market</th>
                                <th data-i18n="reeal.table.price">Price</th>
                            </tr>
                        </thead>
                        <tbody data-reeal-table></tbody>
                    </table>
                </article>
                <article class="reeal-card chart-card">
                    <div class="chart-toolbar">
                        <div>
                            <strong data-i18n="reeal.chart.title">REEAL / USD</strong>
                            <span data-i18n="reeal.chart.subtitle">Seven day snapshot</span>
                        </div>
                        <div class="chart-tabs" aria-hidden="true">
                            <span class="chart-tab active" data-i18n="reeal.chart.tab.price">Price</span>
                            <span class="chart-tab" data-i18n="reeal.chart.tab.liquidity">Liquidity</span>
                            <span class="chart-tab" data-i18n="reeal.chart.tab.tradingview">TradingView</span>
                            <span class="chart-tab" data-i18n="reeal.chart.tab.currency">USD</span>
                        </div>
                    </div>
                    <canvas id="reeal-price-chart" height="220" role="img" aria-label="REEAL token price chart"></canvas>
                    <p class="chart-note" data-i18n="reeal.chart.note" data-i18n-format="html">
                        The REEAL to USD chart is designed for users to instantly see the changes that occur on the market and predicts what will come next.
                        <a href="https://dyor.io" target="_blank" rel="noreferrer">Get this data with DYOR TON API</a>.
                    </p>
                </article>
            </div>
        </div>
    </section>

    <section>
        <div class="section-inner">
            <h2 class="section-title" data-i18n="timeline.title">Embark on the Path</h2>
            <div class="timeline">
                <div class="timeline-step" data-step="1" data-i18n="timeline.step1">
                    Choose your guild banner, rally companions and claim your district in the Citadel of Tales.
                </div>
                <div class="timeline-step" data-step="2" data-i18n="timeline.step2">
                    Complete seasonal quests, unravel riddles from ancient spirits and unlock shared boons for the community.
                </div>
                <div class="timeline-step" data-step="3" data-i18n="timeline.step3">
                    Chronicle your victories on-chain to leave an enduring legacy in the ever-expanding Shahnameh codex.
                </div>
            </div>
        </div>
    </section>

    <section class="community-section">
        <div class="section-inner">
            <h2 class="section-title" data-i18n="community.title">Join the Shahnameh Community</h2>
            <p class="community-intro" data-i18n="community.lead">
                Follow us across social channels to receive launch alerts, lore reveals and economy briefings first.
            </p>
            <div class="social-grid">
                <a class="social-link" href="https://t.me/Shahnameh_bot" target="_blank" rel="noreferrer">
                    <span class="social-icon" aria-hidden="true">🤖</span>
                    <span data-i18n="community.links.bot">Telegram Bot</span>
                </a>
                <a class="social-link" href="https://www.youtube.com/@Shahnamehgamefi/" target="_blank" rel="noreferrer">
                    <span class="social-icon" aria-hidden="true">▶️</span>
                    <span data-i18n="community.links.youtube">YouTube Channel</span>
                </a>
                <a class="social-link" href="https://t.me/Shahnameh_news" target="_blank" rel="noreferrer">
                    <span class="social-icon" aria-hidden="true">🗞️</span>
                    <span data-i18n="community.links.news">Telegram News</span>
                </a>
                <a class="social-link" href="https://www.instagram.com/ShahnamehGameFi" target="_blank" rel="noreferrer">
                    <span class="social-icon" aria-hidden="true">📸</span>
                    <span data-i18n="community.links.instagram">Instagram</span>
                </a>
                <a class="social-link" href="https://x.com/ShahnamehGameFi" target="_blank" rel="noreferrer">
                    <span class="social-icon" aria-hidden="true">𝕏</span>
                    <span data-i18n="community.links.x">X (Twitter)</span>
                </a>
            </div>
        </div>
    </section>

    </main>

    <footer>
        <span data-i18n="footer.credit">Crafted by the Shahnameh core team · Dive deeper on</span>
        <a href="https://github.com/XS227/Shahnameh" target="_blank" rel="noreferrer" data-i18n="footer.link">our knowledge base</a>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const tonElements = {
            price: document.querySelector('[data-ton-price]'),
            change: document.querySelector('[data-ton-change]'),
            liquidity: document.querySelector('[data-ton-liquidity]'),
        };

        const dyorElements = {
            score: document.querySelector('[data-dyor-score]'),
            tier: document.querySelector('[data-dyor-tier]'),
            updated: document.querySelector('[data-dyor-updated]'),
        };

        const contentElements = {
            share: document.querySelector('[data-content-share]'),
            contributors: document.querySelector('[data-contributors]'),
            note: document.querySelector('[data-content-note]'),
        const selectAll = (selector) => Array.from(document.querySelectorAll(selector));

        const setText = (elements, value) => {
            elements.forEach((element) => {
                element.textContent = value;
            });
        };

        const setHTML = (elements, value) => {
            elements.forEach((element) => {
                element.innerHTML = value;
            });
        };

        const translatableElements = selectAll('[data-i18n]');
        const defaultTranslations = {};

        const getElementContent = (element) =>
            element.dataset.i18nFormat === 'text'
                ? element.textContent.trim()
                : element.innerHTML.trim();

        translatableElements.forEach((element) => {
            const key = element.dataset.i18n;
            if (key && defaultTranslations[key] === undefined) {
                defaultTranslations[key] = getElementContent(element);
            }
        });

        const translations = {
            fa: {
                'hero.title': 'افسانه‌ها را در مرزهای شاهنامه بسازید',
                'hero.lead':
                    'یگان خود را گرد آورید، پادشاهی را گسترش دهید و مسیرتان را از دل اسطوره‌های ایران باستان ترسیم کنید. شاهنامه گیم که در فاز نخست به عنوان <strong>سومین انتخاب سردبیر</strong> شناخته شد، راهبردی بازی‌محور را با سرپرستی وب۳ درهم می‌آمیزد تا هر تصمیم در تاریخ جاودانه اثر بگذارد.',
                'hero.mission':
                    '<strong>ما برای متحول کردن اقتصاد ملی ایران از مسیر صنعت بازی مصمم هستیم</strong> و ریل‌هایی عادلانه می‌سازیم تا خلاقیت بازیکنان، فرهنگ و سرمایه برای جوامع داخل کشور و در سراسر دیاسپورا هم‌افزا شود.',
                'hero.cta.primary': 'کشف API',
                'hero.cta.secondary': 'مطالعه وایت‌پیپر',
                'hero.card.title': 'فصل داستانی ۲: سپیده‌دم سیمرغ',
                'hero.card.body':
                    'ماموریت‌ها را طرح‌ریزی کنید، یاران اسطوره‌ای را رام نمایید و ماموریت‌های تعاونی را برای بازسازی خانه دانش آزاد کنید. هر فصل کامل‌شده مسیر مشترک را دگرگون می‌کند.',
                'hero.card.ctaVision': 'مطالعه چشم‌انداز',
                'hero.card.ctaRoadmap': 'نقشه راه فصل دوم',
                'hero.pulse.title': 'نبض جامعه REAL',
                'hero.pulse.copy': 'داده زنده، رویدادهای داستانی و گردهمایی‌های اجتماعی ماجراجویان شاهنامه را در همه مناطق هماهنگ می‌کند.',
                'transparency.title': 'شفافیت توکن، در مرکز صحنه',
                'transparency.lead':
                    'هر کاوشگری می‌تواند قلب خزانه شاهنامه را در لحظه بررسی کند. نوسان قیمت، شتاب دارندگان و نقدینگی پشتیبان ما را بدون ترک صفحه دنبال کنید.',
                'transparency.cards.price': 'قیمت فعلی TON',
                'transparency.cards.change': 'تغییر ۲۴ ساعته:',
                'transparency.cards.holders': 'تعداد دارندگان',
                'transparency.cards.holdersNote': 'در انتظار داده‌های تعداد دارندگان…',
                'transparency.cards.liquidity': 'عمق نقدینگی',
                'transparency.cards.liquidityNote': 'تجمیع‌شده از استخرهای اصلی TON و به‌صورت مستمر تازه می‌شود.',
                'metrics.title': 'آمار لحظه‌ای توکن REAL',
                'metrics.lead': 'داده‌ها به‌صورت مستقیم از DYOR دریافت می‌شود تا مسئولان خزانه یک تصویر مشترک داشته باشند.',
                'metrics.error': 'داده‌های زنده موقتاً در دسترس نیست. به‌زودی دوباره تلاش می‌کنیم.',
                'metrics.priceUsd.title': 'قیمت (دلار)',
                'metrics.priceUsd.note': 'آخرین قیمت لحظه‌ای DYOR',
                'metrics.priceTon.title': 'قیمت (تون)',
                'metrics.priceTon.note': 'نمایش بر حسب TON',
                'metrics.change.title': 'تغییر ۲۴ ساعته',
                'metrics.change.note': 'مومنتوم قیمتی',
                'metrics.marketCap.title': 'ارزش بازار',
                'metrics.marketCap.note': 'ارزش کاملاً رقیق شده',
                'metrics.volume.title': 'حجم ۲۴ ساعته',
                'metrics.volume.note': 'نقدینگی جاری REAL',
                'metrics.liquidityLocked.title': 'نقدینگی قفل‌شده',
                'metrics.liquidityLocked.note': 'ذخایر رصدشده توسط DYOR',
                'metrics.lastSynced': 'آخرین همگام‌سازی',
                'mission.statement':
                    'ماموریت ما جسورانه است: توانمندسازی سازندگان و بازیکنان ایرانی با اقتصادی بازتولیدی و غیرمتمرکز که رونق تازه‌ای را به استودیوها، گیلدها و راویان محلی هدایت می‌کند. <strong>توکنومیک شفاف سنگ‌بنای این انقلاب است.</strong>',
                'countdown.title': 'شمارش معکوس تا فصل بعدی شاهنامه',
                'countdown.days': 'روز',
                'countdown.hours': 'ساعت',
                'countdown.minutes': 'دقیقه',
                'countdown.seconds': 'ثانیه',
                'chronicle.title': 'چرا سالنامه اهمیت دارد',
                'chronicle.cards.lore': 'اسطوره زنده',
                'chronicle.cards.loreBody':
                    'هر هفته فصل‌های تازه در قلمرو طنین می‌اندازد و مأموریت‌ها و همکاری‌های نو را با الهام از شعر جاودانه فردوسی به ارمغان می‌آورد.',
                'chronicle.cards.economy': 'اقتصاد با حاکمیت بازیکنان',
                'chronicle.cards.economyBody':
                    'شورای گیلدها منابع را مدیریت می‌کنند، درباره ارتقا رأی می‌دهند و مسیر باج‌گذاری را طوری تنظیم می‌کنند که حاکمیت روی زنجیره با اهمیت روایی درهم‌تنیده شود.',
                'chronicle.cards.adventure': 'ماجراجویی برای هر قهرمان',
                'chronicle.cards.adventureBody':
                    'از یورش‌های معمایی تا مأموریت‌های اجتماعی، مرزهای شاهنامه راویان، استراتژیست‌ها و داستان‌نگهداران را پاداش می‌دهد.',
                'intel.title': 'اطلاعات زنده TON',
                'intel.lead':
                    'با تله‌متری روی زنجیره چابک بمانید. نوسان قیمت توکن، سلامت نقدینگی و احساسات دقت لازم را مستقیم از TonAPI و DYOR ارائه می‌کنیم تا خزانه‌داران گیلد به‌موقع واکنش نشان دهند.',
                'intel.cards.price': 'قیمت TON',
                'intel.cards.change': 'تغییر ۲۴ ساعته:',
                'intel.cards.liquidityNote': 'در انتظار دریافت داده‌های نقدینگی…',
                'intel.cards.dyor': 'نبض پروژه DYOR',
                'intel.cards.dyorTier': 'در انتظار سطوح ارزیابی DYOR…',
                'intel.cards.dyorUpdated': 'در حال تازه‌سازی داده‌ها…',
                'intel.cards.content': 'مشارکت محتوایی',
                'intel.cards.contributors': 'خالقان تأییدشده:',
                'intel.cards.contentNote': 'همگام‌سازی داشبوردهای جامعه…',
                'intel.footer':
                    'داده‌ها هر چند دقیقه یک‌بار مستقیماً از <a href="https://tonapi.io/" target="_blank" rel="noreferrer">TonAPI</a> و <a href="https://www.dyor.com/" target="_blank" rel="noreferrer">DYOR Intelligence</a> به‌روزرسانی می‌شوند.',
                'reeal.title': 'نبض بازار توکن REEAL',
                'reeal.lead':
                    'عملکرد توکن خزانه REEAL را در بازارهای جهانی دنبال کنید و روند قیمت هفت‌روزه را در یک نگاه به تصویر بکشید.',
                'reeal.table.title': 'تابلوی قیمت جهانی',
                'reeal.table.pair': 'جفت',
                'reeal.table.market': 'بازار',
                'reeal.table.price': 'قیمت',
                'reeal.chart.title': 'REEAL / دلار آمریکا',
                'reeal.chart.subtitle': 'نمای هفت‌روزه',
                'reeal.chart.tab.price': 'قیمت',
                'reeal.chart.tab.liquidity': 'نقدینگی',
                'reeal.chart.tab.tradingview': 'تریدینگ‌ویو',
                'reeal.chart.tab.currency': 'دلار',
                'reeal.chart.note':
                    'نمودار REEAL به دلار برای نمایش فوری تغییرات بازار طراحی شده است و کمک می‌کند حرکت بعدی را پیش‌بینی کنید. <a href="https://dyor.io" target="_blank" rel="noreferrer">داده را با DYOR TON API دریافت کنید</a>.',
                'timeline.title': 'به مسیر قدم بگذارید',
                'timeline.step1':
                    'پرچم گیلد خود را انتخاب کنید، همراهان را گرد آورید و ناحیه‌ای را در ارگ قصه‌ها تصاحب کنید.',
                'timeline.step2':
                    'ماموریت‌های فصلی را کامل کنید، معماهای ارواح کهن را بگشایید و پاداش‌های مشترک را برای جامعه آزاد کنید.',
                'timeline.step3':
                    'پیروزی‌های خود را روی زنجیره ثبت کنید تا میراثی ماندگار در سالنامه در حال گسترش شاهنامه به جا بگذارید.',
                'community.title': 'به جامعه شاهنامه بپیوندید',
                'community.lead':
                    'برای دریافت آگاه‌سازی‌های لانچ، افشاگری‌های داستانی و گزارش‌های اقتصادی در اولویت، ما را در شبکه‌های اجتماعی دنبال کنید.',
                'community.links.bot': 'بات تلگرام',
                'community.links.youtube': 'کانال یوتوب',
                'community.links.news': 'اخبار تلگرام',
                'community.links.instagram': 'اینستاگرام',
                'community.links.x': 'ایکس (توییتر)',
                'footer.credit': 'توسط تیم اصلی شاهنامه ساخته شده · بیشتر بخوانید در',
                'footer.link': 'پایگاه دانش ما',
                'ton.holdersNotePending': 'داده‌های دارندگان به‌زودی از شاخص‌های TON دریافت می‌شود.',
                'intel.cards.liquidityPlaceholder': 'در انتظار دریافت داده‌های نقدینگی…',
                'intel.cards.liquidityPending': 'داده‌های نقدینگی به‌محض آماده‌سازی نمایش داده می‌شوند…',
                'intel.cards.reportedLiquidity': 'نقدینگی گزارش‌شده:',
                'ton.holdersContext': 'کیف‌پول‌های منحصربه‌فرد ردیابی‌شده در نمایه‌سازهای TON.',
                'dyor.scoreUnrated': 'بدون امتیاز',
                'dyor.tierUnavailable': 'رتبه‌بندی DYOR در دسترس نیست.',
                'dyor.tierLabel': 'رتبه ریسک',
                'dyor.tierPending': 'رتبه ریسک در انتظار بررسی DYOR است.',
                'dyor.lastRefreshedPrefix': 'آخرین به‌روزرسانی',
                'content.noteReady': 'سهم محتوایی نشان‌دهنده خالقان تأییدشده در DYOR است.',
                'content.notePending': 'داده سهم محتوا پس از خزش بعدی DYOR نمایش داده می‌شود.',
                'countdown.message.future':
                    'آغاز فصل جدید در <strong>۱۱ نوامبر ۲۰۲۵</strong> است — از هم‌اکنون برنامه‌ریزی گیلد خود را هماهنگ کنید.',
                'countdown.message.live':
                    'فصل جدید آغاز شد — <strong>همین حالا گیلد خود را بسیج کنید!</strong>',
            },
        };

        const languageButtons = selectAll('[data-lang]');
        let activeLanguage = 'en';

        const getLocalizedString = (key, fallback) => {
            if (activeLanguage === 'fa') {
                const translation = translations.fa[key];
                if (translation !== undefined) {
                    return translation;
                }
            }
            return fallback;
        };

        const applyLanguage = (lang) => {
            const supported = ['en', 'fa'];
            const nextLanguage = supported.includes(lang) ? lang : 'en';
            activeLanguage = nextLanguage;
            const isPersian = nextLanguage === 'fa';
            document.documentElement.lang = isPersian ? 'fa' : 'en';
            document.body.dir = isPersian ? 'rtl' : 'ltr';

            languageButtons.forEach((button) => {
                button.classList.toggle('active', button.dataset.lang === nextLanguage);
            });

            translatableElements.forEach((element) => {
                const key = element.dataset.i18n;
                if (!key) return;
                const translation = isPersian ? translations.fa[key] : defaultTranslations[key];
                if (translation !== undefined) {
                    if (element.dataset.i18nFormat === 'text') {
                        element.textContent = translation;
                    } else {
                        element.innerHTML = translation;
                    }
                }
            });

            try {
                localStorage.setItem('preferredLanguage', nextLanguage);
            } catch (error) {
                console.warn('Language preference not stored', error);
            }
        };

        languageButtons.forEach((button) => {
            button.addEventListener('click', () => {
                applyLanguage(button.dataset.lang);
                renderReealTable();
                renderReealChart();
                updateCountdown();
                initialiseIntel();
            });
        });

        let initialLanguage = 'en';
        try {
            const stored = localStorage.getItem('preferredLanguage');
            if (stored && (stored === 'fa' || stored === 'en')) {
                initialLanguage = stored;
            }
        } catch (error) {
            console.warn('Language storage unavailable', error);
        }

        applyLanguage(initialLanguage);

        const reealRates = [
            {
                pair: 'REEAL/TON',
                pairFa: 'REEAL/TON',
                market: { en: 'Toncoin', fa: 'تون‌کوین' },
                code: 'TON',
                amount: 0.00033,
                decimals: 6,
                prefix: 'TON ',
            },
            {
                pair: 'REEAL/USD',
                pairFa: 'REEAL/USD',
                market: { en: 'United States Dollar', fa: 'دلار آمریکا' },
                code: 'USD',
                amount: 0.000094,
                decimals: 6,
                prefix: '$',
            },
            {
                pair: 'REEAL/EUR',
                pairFa: 'REEAL/EUR',
                market: { en: 'Euro', fa: 'یورو' },
                code: 'EUR',
                amount: 0.000088,
                decimals: 6,
                prefix: '€',
            },
            {
                pair: 'REEAL/GBP',
                pairFa: 'REEAL/GBP',
                market: { en: 'British Pound', fa: 'پوند بریتانیا' },
                code: 'GBP',
                amount: 0.000073,
                decimals: 6,
                prefix: '£',
            },
            {
                pair: 'REEAL/CAD',
                pairFa: 'REEAL/CAD',
                market: { en: 'Canadian Dollar', fa: 'دلار کانادا' },
                code: 'CAD',
                amount: 0.000102,
                decimals: 6,
                prefix: 'CA$',
            },
            {
                pair: 'REEAL/AUD',
                pairFa: 'REEAL/AUD',
                market: { en: 'Australian Dollar', fa: 'دلار استرالیا' },
                code: 'AUD',
                amount: 0.000135,
                decimals: 6,
                prefix: 'A$',
            },
            {
                pair: 'REEAL/JPY',
                pairFa: 'REEAL/JPY',
                market: { en: 'Japanese Yen', fa: 'ین ژاپن' },
                code: 'JPY',
                amount: 0.013,
                decimals: 3,
                prefix: '¥',
            },
            {
                pair: 'REEAL/KRW',
                pairFa: 'REEAL/KRW',
                market: { en: 'South Korean Won', fa: 'وون کره‌جنوبی' },
                code: 'KRW',
                amount: 0.128,
                decimals: 3,
                prefix: '₩',
            },
            {
                pair: 'REEAL/TRY',
                pairFa: 'REEAL/TRY',
                market: { en: 'Turkish Lira', fa: 'لیر ترکیه' },
                code: 'TRY',
                amount: 0.803,
                decimals: 3,
                prefix: '₺',
            },
            {
                pair: 'REEAL/BRL',
                pairFa: 'REEAL/BRL',
                market: { en: 'Brazilian Real', fa: 'رئال برزیل' },
                code: 'BRL',
                amount: 0.476,
                decimals: 3,
                prefix: 'R$',
            },
            {
                pair: 'REEAL/KZT',
                pairFa: 'REEAL/KZT',
                market: { en: 'Kazakhstani Tenge', fa: 'تنگه قزاقستان' },
                code: 'KZT',
                amount: 0.49,
                decimals: 3,
                prefix: '₸',
            },
            {
                pair: 'REEAL/UZS',
                pairFa: 'REEAL/UZS',
                market: { en: 'Uzbekistani Som', fa: 'سوم ازبکستان' },
                code: 'UZS',
                amount: 0.11,
                decimals: 3,
                prefix: 'UZS ',
            },
            {
                pair: 'REEAL/BYN',
                pairFa: 'REEAL/BYN',
                market: { en: 'Belarusian Ruble', fa: 'روبل بلاروس' },
                code: 'BYN',
                amount: 0.303,
                decimals: 3,
                prefix: 'Br ',
            },
            {
                pair: 'REEAL/AZN',
                pairFa: 'REEAL/AZN',
                market: { en: 'Azerbaijani Manat', fa: 'منات آذربایجان' },
                code: 'AZN',
                amount: 0.226,
                decimals: 3,
                prefix: '₼',
            },
            {
                pair: 'REEAL/AMD',
                pairFa: 'REEAL/AMD',
                market: { en: 'Armenian Dram', fa: 'درام ارمنستان' },
                code: 'AMD',
                amount: 0.38,
                decimals: 3,
                prefix: '֏',
            },
            {
                pair: 'REEAL/MDL',
                pairFa: 'REEAL/MDL',
                market: { en: 'Moldovan Leu', fa: 'لئوی مولداوی' },
                code: 'MDL',
                amount: 0.056,
                decimals: 3,
                prefix: 'L ',
            },
            {
                pair: 'REEAL/UAH',
                pairFa: 'REEAL/UAH',
                market: { en: 'Ukrainian Hryvnia', fa: 'گریونا اوکراین' },
                code: 'UAH',
                amount: 0.378,
                decimals: 3,
                prefix: '₴',
            },
        ];

        const reealPriceSeries = [
            { label: '04 Oct', labelFa: '۴ اکتبر', price: 0.000000093 },
            { label: '05 Oct', labelFa: '۵ اکتبر', price: 0.000000096 },
            { label: '06 Oct', labelFa: '۶ اکتبر', price: 0.000000094 },
            { label: '07 Oct', labelFa: '۷ اکتبر', price: 0.000000095 },
            { label: '08 Oct', labelFa: '۸ اکتبر', price: 0.000000091 },
            { label: '09 Oct', labelFa: '۹ اکتبر', price: 0.000000089 },
            { label: '10 Oct', labelFa: '۱۰ اکتبر', price: 0.00000009 },
        ];

        const reealTableBody = document.querySelector('[data-reeal-table]');
        const reealChartCanvas = document.getElementById('reeal-price-chart');
        let reealChart;

        const resolvePairLabel = (rate) =>
            activeLanguage === 'fa' && rate.pairFa ? rate.pairFa : rate.pair;

        const resolveMarketLabel = (rate) =>
            activeLanguage === 'fa' && rate.market?.fa ? rate.market.fa : rate.market?.en;

        const formatReealPrice = (rate) => {
            const formatted = formatNumber(rate.amount, {
                minimumFractionDigits: rate.decimals,
                maximumFractionDigits: rate.decimals,
            });
            return `${rate.prefix ?? ''}${formatted}${rate.suffix ?? ''}`;
        };

        const renderReealTable = () => {
            if (!reealTableBody) return;
            const rows = reealRates
                .map((rate) => {
                    const pairLabel = resolvePairLabel(rate);
                    const marketLabel = resolveMarketLabel(rate);
                    const priceLabel = formatReealPrice(rate);
                    return `
                        <tr>
                            <td><strong>${pairLabel}</strong>${rate.code ? `<span>${rate.code}</span>` : ''}</td>
                            <td><strong>${marketLabel}</strong></td>
                            <td><strong>${priceLabel}</strong></td>
                        </tr>
                    `;
                })
                .join('');
            reealTableBody.innerHTML = rows;
        };

        const renderReealChart = () => {
            if (!reealChartCanvas) return;
            const labels = reealPriceSeries.map((point) =>
                activeLanguage === 'fa' && point.labelFa ? point.labelFa : point.label
            );
            const data = reealPriceSeries.map((point) => point.price);
            const context = reealChartCanvas.getContext('2d');

            if (!reealChart) {
                const gradient = context.createLinearGradient(0, 0, 0, reealChartCanvas.height);
                gradient.addColorStop(0, 'rgba(56, 189, 248, 0.35)');
                gradient.addColorStop(1, 'rgba(56, 189, 248, 0)');

                reealChart = new Chart(context, {
                    type: 'line',
                    data: {
                        labels,
                        datasets: [
                            {
                                label: 'REEAL',
                                data,
                                fill: true,
                                backgroundColor: gradient,
                                borderColor: '#38bdf8',
                                borderWidth: 2,
                                tension: 0.35,
                                pointRadius: 3,
                                pointHoverRadius: 4,
                                pointBackgroundColor: '#facc15',
                            },
                        ],
                    },
                    options: {
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false,
                            },
                            tooltip: {
                                backgroundColor: 'rgba(8, 11, 27, 0.85)',
                                borderColor: 'rgba(148, 163, 184, 0.4)',
                                borderWidth: 1,
                                callbacks: {
                                    title: (tooltipItems) => tooltipItems[0]?.label || '',
                                    label: (context) => {
                                        const value = context.parsed.y;
                                        return `${getLocalizedString('reeal.chart.title', 'REEAL / USD')}: ${formatNumber(value, {
                                            minimumFractionDigits: 9,
                                            maximumFractionDigits: 9,
                                        })}`;
                                    },
                                },
                            },
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: 'rgba(148, 163, 184, 0.1)',
                                },
                                ticks: {
                                    color: 'rgba(248, 250, 252, 0.6)',
                                },
                            },
                            y: {
                                grid: {
                                    color: 'rgba(148, 163, 184, 0.1)',
                                },
                                ticks: {
                                    color: 'rgba(248, 250, 252, 0.6)',
                                    callback: (value) =>
                                        formatNumber(value, {
                                            minimumFractionDigits: 9,
                                            maximumFractionDigits: 9,
                                        }),
                                },
                            },
                        },
                    },
                });
            } else {
                reealChart.data.labels = labels;
                reealChart.data.datasets[0].data = data;
                reealChart.options.plugins.tooltip.callbacks.label = (context) => {
                    const value = context.parsed.y;
                    return `${getLocalizedString('reeal.chart.title', 'REEAL / USD')}: ${formatNumber(value, {
                        minimumFractionDigits: 9,
                        maximumFractionDigits: 9,
                    })}`;
                };
                reealChart.update();
            }
        };

        const tonElements = {
            price: selectAll('[data-ton-price]'),
            change: selectAll('[data-ton-change]'),
            liquidity: selectAll('[data-ton-liquidity]'),
            holders: selectAll('[data-ton-holders]'),
            holdersNote: selectAll('[data-ton-holders-note]'),
        };

        const dyorElements = {
            score: selectAll('[data-dyor-score]'),
            tier: selectAll('[data-dyor-tier]'),
            updated: selectAll('[data-dyor-updated]'),
        };

        const contentElements = {
            share: selectAll('[data-content-share]'),
            contributors: selectAll('[data-contributors]'),
            note: selectAll('[data-content-note]'),
        };

        const countdownElements = {
            days: selectAll('[data-countdown-days]'),
            hours: selectAll('[data-countdown-hours]'),
            minutes: selectAll('[data-countdown-minutes]'),
            seconds: selectAll('[data-countdown-seconds]'),
            message: selectAll('[data-countdown-message]'),
        };

        const formatNumber = (value, options = {}) => {
            const { style = 'decimal', minimumFractionDigits = 2, maximumFractionDigits = 2 } = options;
            try {
                const locale = activeLanguage === 'fa' ? 'fa-IR' : 'en-US';
                return new Intl.NumberFormat(locale, {
                    style,
                    minimumFractionDigits,
                    maximumFractionDigits,
                }).format(value);
            } catch (error) {
                console.warn('Formatting error:', error);
                return value;
            }
        };

        const applyFallback = () => {
            tonElements.price.textContent = '$0.00';
            tonElements.change.textContent = '0%';
            tonElements.change.classList.remove('loss', 'gain');
            tonElements.liquidity.textContent = 'Awaiting liquidity feed…';

            dyorElements.score.textContent = 'N/A';
            dyorElements.tier.textContent = 'DYOR ratings currently unavailable.';
            dyorElements.updated.textContent = '';

            contentElements.share.textContent = 'N/A';
            contentElements.contributors.textContent = '--';
            contentElements.note.textContent = 'Community dashboards will populate once DYOR data is reachable.';
            setText(tonElements.price, '$0.00');
            tonElements.change.forEach((element) => {
                element.textContent = '0%';
                element.classList.remove('loss', 'gain');
            });
            tonElements.liquidity.forEach((element) => {
                element.textContent =
                    element.dataset.format === 'raw'
                        ? '$--'
                        : getLocalizedString(
                              'intel.cards.liquidityPlaceholder',
                              'Awaiting liquidity feed…'
                          );
            });
            setText(tonElements.holders, '--');
            setText(
                tonElements.holdersNote,
                getLocalizedString(
                    'ton.holdersNotePending',
                    'Holder telemetry will display once TON indexers respond.'
                )
            );

            setText(dyorElements.score, 'N/A');
            setText(
                dyorElements.tier,
                getLocalizedString('dyor.tierUnavailable', 'DYOR ratings currently unavailable.')
            );
            setText(dyorElements.updated, '');

            setText(contentElements.share, 'N/A');
            setText(contentElements.contributors, '--');
            setText(
                contentElements.note,
                getLocalizedString(
                    'content.notePending',
                    'Community dashboards will populate once DYOR data is reachable.'
                )
            );
        };

        const derivePercentage = (value) => {
            if (value === undefined || value === null || Number.isNaN(Number(value))) {
                return null;
            }

            return Number(value) * (Number(value) <= 1 ? 100 : 1);
        };

        const fetchTonStats = async () => {
            const endpoints = [
                'https://tonapi.io/v2/rates?tokens=toncoin&currencies=usd',
                'https://tonapi.io/v2/explorer/rates?currencies=usd',
            ];

            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(endpoint);
                    if (!response.ok) continue;

                    const data = await response.json();
                    const rates = data?.rates || data?.data?.rates || data;
                    const tonKey = Object.keys(rates || {}).find((key) => key.toLowerCase().includes('ton'));

                    if (!tonKey) continue;

                    const tonData = rates[tonKey];
                    const price =
                        tonData?.prices?.usd ||
                        tonData?.prices?.USD ||
                        tonData?.price_usd ||
                        tonData?.price ||
                        tonData?.value;

                    const change =
                        tonData?.diff_24h?.usd ||
                        tonData?.diff_24h ||
                        tonData?.priceChange24h ||
                        tonData?.change_24h ||
                        tonData?.diff ||
                        0;

                    const liquidity =
                        tonData?.liquidity?.usd ||
                        tonData?.market_liquidity?.usd ||
                        tonData?.liquidity ||
                        null;

                    if (price !== undefined) {
                        tonElements.price.textContent = `$${formatNumber(Number(price), {
                            minimumFractionDigits: 2,
                            maximumFractionDigits: 2,
                        })}`;
                    const holders =
                        tonData?.holders ||
                        tonData?.holders_count ||
                        tonData?.metrics?.holders ||
                        tonData?.addresses?.holders;

                    if (price !== undefined) {
                        const formattedPrice = `$${formatNumber(Number(price), {
                            minimumFractionDigits: 2,
                            maximumFractionDigits: 2,
                        })}`;
                        setText(tonElements.price, formattedPrice);
                    }

                    if (change !== undefined && change !== null) {
                        const changeValue = Number(change);
                        tonElements.change.textContent = `${changeValue > 0 ? '+' : ''}${formatNumber(changeValue, {
                            minimumFractionDigits: 2,
                            maximumFractionDigits: 2,
                        })}%`;
                        tonElements.change.classList.toggle('gain', changeValue > 0);
                        tonElements.change.classList.toggle('loss', changeValue < 0);
                    }

                    if (liquidity) {
                        tonElements.liquidity.textContent = `Reported liquidity: $${formatNumber(Number(liquidity), {
                            minimumFractionDigits: 0,
                            maximumFractionDigits: 0,
                        })}`;
                    } else {
                        tonElements.liquidity.textContent = 'Liquidity metrics pending fresh updates…';
                        tonElements.change.forEach((element) => {
                            element.textContent = `${changeValue > 0 ? '+' : ''}${formatNumber(changeValue, {
                                minimumFractionDigits: 2,
                                maximumFractionDigits: 2,
                            })}%`;
                            element.classList.toggle('gain', changeValue > 0);
                            element.classList.toggle('loss', changeValue < 0);
                        });
                    }

                    if (liquidity) {
                        const formattedLiquidity = `$${formatNumber(Number(liquidity), {
                            minimumFractionDigits: 0,
                            maximumFractionDigits: 0,
                        })}`;
                        tonElements.liquidity.forEach((element) => {
                            if (element.dataset.format === 'raw') {
                                element.textContent = formattedLiquidity;
                            } else {
                                element.textContent = `${getLocalizedString(
                                    'intel.cards.reportedLiquidity',
                                    'Reported liquidity:'
                                )} ${formattedLiquidity}`;
                            }
                        });
                    } else {
                        tonElements.liquidity.forEach((element) => {
                            element.textContent =
                                element.dataset.format === 'raw'
                                    ? '$--'
                                    : getLocalizedString(
                                          'intel.cards.liquidityPending',
                                          'Liquidity metrics pending fresh updates…'
                                      );
                        });
                    }

                    if (holders !== undefined && holders !== null && !Number.isNaN(Number(holders))) {
                        const formattedHolders = formatNumber(Number(holders), {
                            minimumFractionDigits: 0,
                            maximumFractionDigits: 0,
                        });
                        setText(tonElements.holders, formattedHolders);
                        setText(
                            tonElements.holdersNote,
                            getLocalizedString(
                                'ton.holdersContext',
                                'Unique wallets tracked across TON indexers.'
                            )
                        );
                    }

                    return;
                } catch (error) {
                    console.warn('TonAPI fetch error', error);
                }
            }
        };

        const fetchDyorStats = async () => {
            const endpoints = [
                'https://api.dyor.io/v1/token/toncoin',
                'https://api.dyor.io/v1/projects/toncoin',
            ];

            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(endpoint);
                    if (!response.ok) continue;

                    const payload = await response.json();
                    const project = payload?.data || payload?.project || payload;
                    if (!project) continue;

                    const score =
                        derivePercentage(project?.scores?.overall) ||
                        derivePercentage(project?.summary?.score) ||
                        derivePercentage(project?.dyor_score);

                    const tier =
                        project?.ratings?.tier ||
                        project?.scores?.tier ||
                        project?.summary?.rating ||
                        project?.risk_level;

                    const updatedAt =
                        project?.updated_at ||
                        project?.last_update ||
                        project?.scores?.updated_at ||
                        project?.summary?.updated_at;

                    const contentPercent =
                        derivePercentage(project?.community?.content_percent) ||
                        derivePercentage(project?.content_percent) ||
                        derivePercentage(project?.metrics?.content_share);

                    const contributors =
                        project?.community?.contributors ||
                        project?.contributors ||
                        project?.metrics?.verified_contributors;

                    if (score !== null) {
                        dyorElements.score.textContent = `${formatNumber(score, {
                            minimumFractionDigits: 1,
                            maximumFractionDigits: 1,
                        })}%`;
                    } else {
                        dyorElements.score.textContent = 'Unrated';
                    }

                    if (tier) {
                        dyorElements.tier.textContent = `Risk tier: ${tier}`;
                    } else {
                        dyorElements.tier.textContent = 'Risk tier awaiting DYOR review.';
                        const formattedScore = `${formatNumber(score, {
                            minimumFractionDigits: 1,
                            maximumFractionDigits: 1,
                        })}%`;
                        setText(dyorElements.score, formattedScore);
                    } else {
                        setText(
                            dyorElements.score,
                            getLocalizedString('dyor.scoreUnrated', 'Unrated')
                        );
                    }

                    if (tier) {
                        const tierLabel = getLocalizedString('dyor.tierLabel', 'Risk tier');
                        setText(dyorElements.tier, `${tierLabel}: ${tier}`);
                    } else {
                        setText(
                            dyorElements.tier,
                            getLocalizedString(
                                'dyor.tierPending',
                                'Risk tier awaiting DYOR review.'
                            )
                        );
                    }

                    if (updatedAt) {
                        const updatedDate = new Date(updatedAt);
                        if (!Number.isNaN(updatedDate.getTime())) {
                            const locale = activeLanguage === 'fa' ? 'fa-IR' : 'en-US';
                            const readable = `${getLocalizedString(
                                'dyor.lastRefreshedPrefix',
                                'Last refreshed'
                            )} ${updatedDate.toLocaleString(locale)}`;
                            dyorElements.updated.textContent = `Last refreshed ${updatedDate.toLocaleString()}`;
                        }
                    } else {
                        dyorElements.updated.textContent = '';
                    }

                    if (contentPercent !== null) {
                        contentElements.share.textContent = `${formatNumber(contentPercent, {
                            minimumFractionDigits: 1,
                            maximumFractionDigits: 1,
                        })}%`;
                    } else {
                        contentElements.share.textContent = 'N/A';
                    }

                    if (contributors !== undefined) {
                        contentElements.contributors.textContent = formatNumber(Number(contributors), {
                            minimumFractionDigits: 0,
                            maximumFractionDigits: 0,
                        });
                    } else {
                        contentElements.contributors.textContent = '--';
                    }

                    contentElements.note.textContent =
                        contentPercent !== null
                            ? 'Content share reflects vetted creators on DYOR.'
                            : 'Content share data pending next DYOR crawl.';
                            const readable = `Last refreshed ${updatedDate.toLocaleString()}`;
                            setText(dyorElements.updated, readable);
                        }
                    } else {
                        setText(dyorElements.updated, '');
                    }

                    if (contentPercent !== null) {
                        const formattedContent = `${formatNumber(contentPercent, {
                            minimumFractionDigits: 1,
                            maximumFractionDigits: 1,
                        })}%`;
                        setText(contentElements.share, formattedContent);
                    } else {
                        setText(contentElements.share, 'N/A');
                    }

                    if (contributors !== undefined) {
                        const formattedContributors = formatNumber(Number(contributors), {
                            minimumFractionDigits: 0,
                            maximumFractionDigits: 0,
                        });
                        setText(contentElements.contributors, formattedContributors);
                    } else {
                        setText(contentElements.contributors, '--');
                    }

                    setText(
                        contentElements.note,
                        contentPercent !== null
                            ? getLocalizedString(
                                  'content.noteReady',
                                  'Content share reflects vetted creators on DYOR.'
                              )
                            : getLocalizedString(
                                  'content.notePending',
                                  'Content share data pending next DYOR crawl.'
                              )
                    );

                    return;
                } catch (error) {
                    console.warn('DYOR fetch error', error);
                }
            }
        };

        const initialiseIntel = async () => {
            applyFallback();
            await Promise.all([fetchTonStats(), fetchDyorStats()]);
        };

        const seasonLaunch = new Date('2025-11-11T00:00:00Z');

        const updateCountdown = () => {
            const now = new Date();
            if (Number.isNaN(seasonLaunch.getTime()) || Number.isNaN(now.getTime())) {
                return;
            }

            let diff = seasonLaunch.getTime() - now.getTime();
            const isPast = diff <= 0;
            if (isPast) {
                diff = 0;
            }

            const totalSeconds = Math.floor(diff / 1000);
            const days = Math.floor(totalSeconds / 86_400);
            const hours = Math.floor((totalSeconds % 86_400) / 3_600);
            const minutes = Math.floor((totalSeconds % 3_600) / 60);
            const seconds = totalSeconds % 60;

            setText(countdownElements.days, days.toString().padStart(2, '0'));
            setText(countdownElements.hours, hours.toString().padStart(2, '0'));
            setText(countdownElements.minutes, minutes.toString().padStart(2, '0'));
            setText(countdownElements.seconds, seconds.toString().padStart(2, '0'));

            const message = isPast
                ? getLocalizedString(
                      'countdown.message.live',
                      'Season relaunch has begun — <strong>rally your guild now!</strong>'
                  )
                : getLocalizedString(
                      'countdown.message.future',
                      'Season relaunch is scheduled for <strong>11 November 2025</strong> — synchronise your guild\'s plans now.'
                  );
            setHTML(countdownElements.message, message);
        };

        renderReealTable();
        renderReealChart();
        updateCountdown();
        setInterval(updateCountdown, 1_000);

        initialiseIntel();
        setInterval(initialiseIntel, 180_000);
    </script>
</body>
</html>
